# DungeonCrawlerWPF

## Описание
**DungeonCrawlerWPF** — это WPF-приложение, основанное на ранее существовавшей консольной игре «Dungeon Crawler».  
Цель игры — управлять персонажем на карте (поле), собирать сокровища и избегать столкновения с врагами.  

## Основные возможности
- **Новая игра**: генерация случайного поля, размещение игрока (P), сокровищ (T) и врагов (E).  
- **Загрузка**: восстановление игры из сохранённого файла.  
- **Сохранение**: сериализация текущего состояния (карты, позиции игрока, врагов и т. д.) в файл.  
- **Настройки**: выбор количества врагов, размера карты и автоматический перерасчёт количества сокровищ.  
- **Управление** с клавиатуры:
  - **W** — движение вверх
  - **S** — движение вниз
  - **A** — движение влево
  - **D** — движение вправо
  - **Escape** — выход / меню

## Требования
- **.NET 6** (или выше) / **.NET Framework 4.7+** (в зависимости от того, на чём создан проект).
- Среда разработки, поддерживающая **WPF** (Visual Studio 2019/2022 или аналог).

### Ключевые файлы
1. **GameEngine.cs**  
   - Содержит игровую логику (генерация карты, движение игрока, движение врагов, проверка победы/поражения).  
   - Экземпляр класса `GameEngine` создаётся в `MainWindow.xaml.cs`.

2. **MainWindow.xaml / MainWindow.xaml.cs**  
   - Главное окно приложения.  
   - Отображает карту (`MapTextBlock`) и статус (количество ходов, число собранных сокровищ).  
   - Содержит кнопки: «Новая игра», «Загрузить», «Сохранить», «Настройки».  
   - Реагирует на нажатия клавиш (W, A, S, D, Escape) через обработчик `Window_KeyDown`.  

3. **SettingsWindow.xaml / SettingsWindow.xaml.cs**  
   - Окно для изменения **EnemyCount** (количества врагов) и **MapSize** (размера карты).  
   - Применяет изменения к текущему экземпляру `GameEngine`.  
   - При необходимости пересоздаёт игру (инициализирует заново).

4. **App.xaml / App.xaml.cs**  
   - Точка входа WPF-приложения, содержит глобальные ресурсы и стили (например, общий стиль для `Window` или `TextBlock`).  

## Сборка и запуск
1. Откройте проект **DungeonCrawlerWPF** в Visual Studio (или другой IDE, поддерживающей WPF).  
2. Убедитесь, что все зависимости установлены, а проект компилируется без ошибок.  
3. Нажмите **F5** (или «Запуск») для старта приложения.  

После запуска вы увидите **MainWindow**. Справа отображается «Справка» с информацией об управлении, правилами и обозначениями.

## Использование
1. **Новая игра**  
   - Нажмите «Новая игра».  
   - На карте появится игрок (P), несколько врагов (E) и сокровищ (T).  
   - Цель — собрать все `T`, избегая столкновений с `E`.  

2. **Управление**  
   - Убедитесь, что окно в фокусе. Используйте W, A, S, D для перемещения.  
   - **Escape** — выход в меню / остановка игры.  

3. **Настройки**  
   - Нажмите «Настройки», чтобы открыть окно **SettingsWindow**.  
   - Измените параметры (EnemyCount, MapSize).  
   - Нажмите «OK» для применения настроек (при необходимости игра будет перезапущена).  

4. **Сохранение**  
   - Нажмите «Сохранить».  
   - Текущее состояние (карта, позиции, счётчики) сохраняется в файл (по умолчанию `savegame.txt`).  

5. **Загрузка**  
   - Нажмите «Загрузить».  
   - Если файл сохранения существует, игра восстановит предыдущую конфигурацию.  

6. **Завершение**  
   - Столкновение с врагом (E) приводит к проигрышу.  
   - Сбор всех сокровищ (T) ведёт к победе.  

## Внешний вид
- Основное поле (карта) и статус обёрнуты в `Border` со стилем (рамка, отступы, светлый фон).  
- Справа расположена панель «Справка» (управление, правила, обозначения).  
- Глобальные стили (цвет, шрифт) описаны в `App.xaml`.

## Расширение
- Реализовать новые типы врагов, ловушки или уровни сложности.  
- Реализовать разноцветное отображения символов (P, T, E и пр.) 
- Логику событий («победа», «проигрыш» и т. д.) можно заменить на `event`-ы вместо исключений — для более гибкого управления сценарием.


Приятной игры!
